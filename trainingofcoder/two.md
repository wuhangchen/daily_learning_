## 编译和链接
```shell 
gcc hello.c
./a.out
```

1. 程序的运行的是可以分为4个阶段的：分别为预处理(prepressing),编译(compilation),汇编(assembly)和链接(linking)。
2. 预处理阶段:
```shell
gcc -E hello.c -o hello.i
```
	- 将所有的`#define`删除，并展开所有的宏定义
	- 处理所有的条件编译指令，比如`#if`,`#ifdef`,`#elf`,`#else`,`#endif`
	- 删除所有的注释
	- 添加行号和文件名标识
	- 保留所有的`#pragma`编译指令，因为编译器会使用它们。
3. 编译的过程：
```shell
gcc -S hello.i -o hello.s
```
编译的过程是把预处理的文件进行一系列的词法分析、语法分析、语义分析、以及优化后生成对应的汇编代码文件。

4. 汇编就是将汇编代码转变成机器可以直接运行的指令，每一个汇编指令都几乎对应一条机器指令，所以汇编过程相对于编译的过程比较简单。
```shell 
as hello.s -o hello.o
#or
gcc -c hello.s -o hello.o
gcc -c hello.c -o hello.o

5. 链接过程一个比较复杂的过程，可以这样想象一下，我们使用了 `printf`函数，那么实际上在链接的过程ld会将`printf.o`包含在对象文件中。后面会继续详细的讲解。

现代的编译和链接过程也并非想象的那么复杂，它还是一个比较容易的概念。比如我们在程序模块中main.c中使用另外一个模块fun.c中的函数，我们在main.c模块中每一处调用fun.c的时候，都必须要使用foo这个函数的地址，但是由于模块都是单独的编译，在编译器中编译main.c的时候它并不知道foo的函数的地址，所以它暂时将这些调用foo的指令的目标地址搁置，等待最后链接的时候由链接器去将这些指令的目标地址修正，如果没有链接器，就需要我们手工把每个调用foo的指令进行修正，填入正确的foo函数地址。

